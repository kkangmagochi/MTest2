<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>깡통 키우기</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <div class="container">
        <!-- 메인 캐릭터 영역 -->
        <div class="character-container">
            <div class="character-room">
                <!-- 캐릭터 이미지가 방 안에 배치되는 공간 -->
                <div id="character-image-container" class="character-image-container">
                    <img id="character-image" src="" alt="캐릭터" class="hidden">
                </div>
            </div>
            
            <!-- 상태 정보 영역 -->
            <div class="status-container">
                <!-- 프로필 이미지 액자 (스탯창 옆에 별도 표시) -->
                <div class="profile-frame">
                    <img id="profile-image" src="" alt="프로필" class="hidden">
                </div>
                
                <!-- 스탯 표시 영역 (원형으로 변경) -->
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-circle" id="affection-stat">
                            <span class="stat-label">호감도</span>
                        </div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-circle" id="hunger-stat">
                            <span class="stat-label">허기</span>
                        </div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-circle" id="happiness-stat">
                            <span class="stat-label">행복도</span>
                        </div>
                    </div>
                    <button id="reset-stats" class="reset-button">스탯 초기화</button>
                </div>
                
                <!-- 만난지 n일째 표시 -->
                <div class="days-counter">
                    <span id="days-count">만난지 0일째</span>
                </div>
                
                <!-- 캐릭터 상태 표시 -->
                <div class="character-status">
                    <span id="status-text">대기중...</span>
                </div>
            </div>
            
            <!-- 대화창 영역 -->
            <div class="dialogue-container">
                <div id="dialogue-text" class="dialogue-text">
                    안녕하세요! 저와 함께 놀아요!
                </div>
            </div>
            
            <!-- 상호작용 버튼 영역 (2x2 배열로 변경) -->
            <div class="interaction-buttons">
                <div class="button-row">
                    <button id="feed-button" class="interaction-button">밥주기</button>
                    <button id="play-button" class="interaction-button">놀아주기</button>
                </div>
                <div class="button-row">
                    <button id="gift-button" class="interaction-button">선물주기</button>
                    <button id="sleep-button" class="interaction-button">잠자기</button>
                </div>
            </div>
            
            <!-- 대화 입력창 -->
            <div class="input-container">
                <input type="text" id="user-input" placeholder="메시지를 입력하세요...">
                <button id="send-button">보내기</button>
            </div>
        </div>
        
        <!-- 세로 메뉴 영역 (우측에 배치) -->
        <div class="menu-container">
            <button class="menu-button" id="character-management-btn">캐릭터 관리</button>
            <button class="menu-button" id="api-settings-btn">API 설정</button>
            <button class="menu-button" id="custom-settings-btn">맞춤 설정</button>
            <button class="menu-button" id="image-share-btn">이미지 공유</button>
            <button class="menu-button" id="dialogue-log-btn">대화 로그</button>
        </div>
    </div>
    
    <!-- 팝업 모달 영역 -->
    <!-- 캐릭터 관리 팝업 -->
    <div id="character-management-modal" class="modal">
        <div class="modal-content">
            <h2>캐릭터 관리</h2>
            <button class="modal-button" id="add-character-btn">새 캐릭터 추가</button>
            <button class="modal-button" id="edit-character-btn">캐릭터 수정</button>
            <button class="modal-button" id="delete-character-btn">캐릭터 삭제</button>
            <button class="close-modal">닫기</button>
        </div>
    </div>
    
    <!-- API 설정 팝업 -->
    <div id="api-settings-modal" class="modal">
        <div class="modal-content">
            <h2>API 설정</h2>
            <div class="api-settings-form">
                <label for="api-key">Google Gemini API 키:</label>
                <input type="text" id="api-key" placeholder="API 키를 입력하세요">
                <button id="save-api-key">저장</button>
                
                <div class="model-selection">
                    <label>AI 모델 선택:</label>
                    <div class="radio-group">
                        <input type="radio" id="gemini-flash" name="model" value="flash" checked>
                        <label for="gemini-flash">Gemini 2.0 Flash</label>
                        <input type="radio" id="gemini-pro" name="model" value="pro">
                        <label for="gemini-pro">Gemini 2.0 Pro</label>
                    </div>
                </div>
                
                <div class="api-status">
                    <label>API 연결 상태:</label>
                    <span id="connection-status">미연결</span>
                    <button id="test-connection">연결 테스트</button>
                </div>
            </div>
            <button class="close-modal">닫기</button>
        </div>
    </div>
    
    <!-- 맞춤 설정 팝업 -->
    <div id="custom-settings-modal" class="modal">
        <div class="modal-content">
            <h2>맞춤 설정</h2>
            
            <div class="custom-dialogue-section">
                <h3>맞춤 대화</h3>
                <div id="custom-dialogue-list" class="custom-list"></div>
                <div class="add-custom-item">
                    <input type="text" id="new-dialogue" placeholder="새 대화 입력">
                    <button id="add-dialogue">추가</button>
                    <button id="generate-dialogue">AI 생성</button>
                </div>
            </div>
            
            <div class="custom-gift-section">
                <h3>맞춤 선물</h3>
                <div id="custom-gift-list" class="custom-list"></div>
                <div class="add-custom-item">
                    <input type="text" id="new-gift" placeholder="새 선물 입력">
                    <button id="add-gift">추가</button>
                    <button id="generate-gift">AI 생성</button>
                </div>
            </div>
            
            <button class="close-modal">닫기</button>
        </div>
    </div>
    
    <!-- 이미지 공유 팝업 -->
    <div id="image-share-modal" class="modal">
        <div class="modal-content">
            <h2>이미지 공유</h2>
            <button id="capture-screen">현재 화면 캡처</button>
            <button id="download-image">이미지 다운로드</button>
            <div id="preview-container" class="preview-container">
                <img id="preview-image" class="hidden">
            </div>
            <button class="close-modal">닫기</button>
        </div>
    </div>
    
    <!-- 대화 로그 팝업 -->
    <div id="dialogue-log-modal" class="modal">
        <div class="modal-content">
            <h2>대화 로그</h2>
            <div id="dialogue-log-list" class="dialogue-log-list">
                <!-- 대화 로그 항목들이 여기에 추가됩니다 -->
            </div>
            <button class="close-modal">닫기</button>
        </div>
    </div>
    
    <!-- 새 캐릭터 추가 팝업 -->
    <div id="add-character-modal" class="modal">
        <div class="modal-content">
            <h2>새 캐릭터 추가</h2>
            <form id="add-character-form">
                <div class="form-group">
                    <label for="character-name">캐릭터 이름:</label>
                    <input type="text" id="character-name" required>
                </div>
                <div class="form-group">
                    <label for="character-personality">캐릭터 성격:</label>
                    <textarea id="character-personality" required></textarea>
                </div>
                <div class="form-group">
                    <label for="character-background">캐릭터 세계관:</label>
                    <textarea id="character-background" required></textarea>
                </div>
                <div class="form-group">
                    <label for="character-speech">말투:</label>
                    <textarea id="character-speech" required></textarea>
                </div>
                <div class="form-group">
                    <label for="character-image-upload">캐릭터 이미지:</label>
                    <input type="file" id="character-image-upload" accept="image/*" required>
                </div>
                <div class="form-group">
                    <label for="profile-image-upload">프로필 이미지 (선택사항):</label>
                    <input type="file" id="profile-image-upload" accept="image/*">
                </div>
                <div class="form-buttons">
                    <button type="submit">저장</button>
                    <button type="button" class="cancel-button">취소</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- 캐릭터 업로드 안내 팝업 -->
    <div id="upload-guide-modal" class="modal">
        <div class="modal-content">
            <h2>안녕하세요!</h2>
            <p>캐릭터를 업로드해주세요!</p>
            <p>좌측 하단의 캐릭터 업로드 버튼을 눌러주세요.</p>
            <button id="upload-guide-close" class="close-modal">확인</button>
        </div>
    </div>
    
    <!-- 캐릭터 삭제 확인 팝업 -->
    <div id="delete-confirm-modal" class="modal">
        <div class="modal-content">
            <h2>정말로 선택한 캐릭터를 삭제하시겠습니까?</h2>
            <p>이 작업은 되돌릴 수 없습니다.</p>
            <div class="confirm-buttons">
                <button id="confirm-delete">삭제</button>
                <button id="cancel-delete">취소</button>
            </div>
        </div>
    </div>
    
    <!-- 복사 안내 팝업 -->
    <div id="copy-guide-modal" class="modal">
        <div class="modal-content">
            <p>마음에 드는 대화는 '복사' 버튼을 클릭해 클립보드에 복사하세요. 계속 보고 싶은 대사는 설정의 '맞춤 대화'에 추가해주세요.</p>
            <button class="close-modal">확인</button>
        </div>
    </div>

    <!-- 자바스크립트 파일 연결 -->
    <script src="./main.js"></script>
    <script src="./character.js"></script>
    <script src="./interaction.js"></script>
    <script src="./ai.js"></script>
    <script src="./storage.js"></script>
    <script src="./ui.js"></script>
    <script src="./utils.js"></script>
</body>
</html>
